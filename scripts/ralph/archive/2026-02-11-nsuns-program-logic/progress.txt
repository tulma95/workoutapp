## Codebase Patterns
- Weight rounding: Use `Math.round(weight / increment) * increment` pattern for plate rounding
- Backend lib files go in `backend/src/lib/`
- Backend services go in `backend/src/services/` — follow auth.service.ts pattern
- Backend routes go in `backend/src/routes/` — follow routes/auth.ts pattern (zod validation, error response format)
- Pure domain logic has no dependencies on DB or external modules
- Unit tests for lib modules go in `backend/src/__tests__/lib/`
- Integration tests go in `backend/src/__tests__/` — use supertest with real DB, no mocking
- Error response format: `{ error: { code: string, message: string } }`
- Auth middleware: `authenticate` from `middleware/auth.ts`, provides `req.userId`
- Request validation: `validate(zodSchema)` from `middleware/validate.ts`
- Prisma Decimal fields need `Number()` conversion when returning to callers
- Weights stored internally in kg — convert from lb at API boundary
- TrainingMax is append-only: current TM = latest effectiveDate per exercise
- PRD example "63.7 → 65" for kg rounding is wrong; 63.7 rounds to 62.5 (nearest 2.5). Always verify math in acceptance criteria.
- Typecheck: `npx tsc --noEmit -p backend/tsconfig.json` or `npx tsc --noEmit -p frontend/tsconfig.json`

# Ralph Progress Log
Started: Wed Feb 11 2026
---
